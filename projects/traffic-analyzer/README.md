# üöó –ê–Ω–∞–ª–∏–∑ —Ç—Ä–∞—Ñ–∏–∫–∞ –Ω–∞ –∫—Ä—É–≥–æ–≤–æ–º –¥–≤–∏–∂–µ–Ω–∏–∏

[![Python](https://img.shields.io/badge/Python-3.8%2B-blue)](https://www.python.org/)
[![Docker](https://img.shields.io/badge/Docker-20.10%2B-blue)](https://www.docker.com/)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)
[![YOLOv8](https://img.shields.io/badge/YOLO-v8-yellow)](https://github.com/ultralytics/ultralytics)

**Production-ready —Å–∏—Å—Ç–µ–º–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –∫–∞–º–µ—Ä, –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–æ–≤ InfluxDB –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º–∏ –¥–∞—à–±–æ—Ä–¥–∞–º–∏ –≤ Grafana**

–°–∏—Å—Ç–µ–º–∞ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç –∞–Ω–∞–ª–∏–∑ –≤—Ö–æ–¥—è—â–µ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞ –Ω–∞ —É—á–∞—Å—Ç–∫–µ –∫—Ä—É–≥–æ–≤–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏. –ê–ª–≥–æ—Ä–∏—Ç–º –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å –ø—Ä–∏–º—ã–∫–∞—é—â–∏—Ö –¥–æ—Ä–æ–≥ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π.

üì∫ [**–í–∏–¥–µ–æ–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø—Ä–æ–µ–∫—Ç—É –∏ –µ–≥–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ**](https://vk.com/video-145052891_456247910)

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫](#-–∫–∞–∫-–∑–∞–ø—É—Å—Ç–∏—Ç—å-–ª–æ–∫–∞–ª—å–Ω–æ-–≤-python-–±–µ–∑-–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö-–º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#Ô∏è-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–ö–æ–¥ –≥–ª–∞–≤–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞](#-–∫–æ–¥-–≥–ª–∞–≤–Ω–æ–≥–æ-—Å–µ—Ä–≤–∏—Å–∞-–ø–æ-–æ–±—Ä–∞–±–æ—Ç–∫–µ-–≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫–∞)
- [–†–∞–±–æ—Ç–∞ —Å –ø—Ä–æ–≥—Ä–∞–º–º–æ–π](#-—Ä–∞–±–æ—Ç–∞-—Å-–ø—Ä–æ–≥—Ä–∞–º–º–æ–π)
- [–ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã](#-–ø—Ä–∏–º–µ—Ä—ã-—Ä–∞–±–æ—Ç—ã-–∫–æ–¥–∞)
- [–í–µ—Ä—Å–∏–∏ –∫–æ–¥–∞](#-—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ-–≤–µ—Ä—Å–∏–∏-–∫–æ–¥–∞)

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
cd TrafficAnalyzer
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ —Å –ø–∞—Ä–æ–ª—è–º–∏ –∏ –ª–æ–≥–∏–Ω–∞–º–∏ –∫ —Å–µ—Ä–≤–∏—Å–∞–º:

```env
INFLUXDB_ADMIN_USER=admin
INFLUXDB_ADMIN_PASSWORD=admin
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin
KAFKA_USERNAME=traffic
KAFKA_PASSWORD=traffic-secret
```

### –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

```bash
docker compose -p traffic_analyzer up -d --build
```

### –î–æ—Å—Ç—É–ø –∫ Grafana

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [–¥–∞—à–±–æ—Ä–¥ Grafana](http://localhost:3111/d/edycr94pt2mm8b/dashboard-trafficanalyzer-1-camera-influx?orgId=1&refresh=5s).

- **–õ–æ–≥–∏–Ω**: `admin`
- **–ü–∞—Ä–æ–ª—å**: `admin`

–£ –∫–∞–∂–¥–æ–π –∫–∞–º–µ—Ä—ã —Å–≤–æ–π –¥–∞—à–±–æ—Ä–¥, –º–µ–∂–¥—É –∫–æ—Ç–æ—Ä—ã–º–∏ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è:

![grafana](https://github.com/user-attachments/assets/c0c6d602-2026-460f-9c48-64180e87ca8e)

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∫–∞–º–µ—Ä

–ö–∞–∂–¥–∞—è –Ω–æ–≤–∞—è –∫–∞–º–µ—Ä–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ `docker-compose.yaml` –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å `traffic_analyzer_camera_{n}` —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

## üíª –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ –≤ Python –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ pip
python -m pip install --upgrade pip

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install "numpy<2"
pip install cython_bbox==0.1.5 lap==0.4.0

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PyTorch (CUDA 12.1)
pip install torch==2.3.1 torchvision==0.18.1 --index-url https://download.pytorch.org/whl/cu121

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt
```

### –ó–∞–ø—É—Å–∫

```bash
python main_optimized.py pipeline.send_info_kafka=False
```

–†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: [http://127.0.0.1:8100/](http://127.0.0.1:8100/)

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Å–∏—Å—Ç–µ–º—É –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –≤–∏–¥–µ–æ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏, —Ä–∞–±–æ—Ç–∞—é—â—É—é —Å RTSP-—Å—Ç—Ä–∏–º–∞–º–∏ –∏–ª–∏ MP4-—Ñ–∞–π–ª–∞–º–∏. –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å **traffic_analyzer_camera_{n}** –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–∞–¥—Ä—ã, –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–∏—Å–ª–æ –º–∞—à–∏–Ω –Ω–∞ –∫—Ä—É–≥–æ–≤–æ–º —É—á–∞—Å—Ç–∫–µ, –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å –ø—Ä–∏–º—ã–∫–∞—é—â–∏—Ö –¥–æ—Ä–æ–≥) –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö –≤ –±—Ä–æ–∫–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π **Kafka**. –î–ª—è –∫–∞–∂–¥–æ–π –∫–∞–º–µ—Ä—ã –∑–∞–ø–∏—Å—å realtime —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤–µ–¥–µ—Ç—Å—è –≤ —Å–≤–æ–π —Ç–æ–ø–∏–∫ *statistics_{n}*. –î–∞–Ω–Ω—ã–µ –∏–∑ Kafka –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –±–∞–∑—É –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–æ–≤ **InfluxDB** —Å –ø–æ–º–æ—â—å—é **Telegraf**. InfluxDB –æ–ø—Ç–∏–º–∞–ª—å–Ω–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ—Ç–æ–∫–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –±–ª–∞–≥–æ–¥–∞—Ä—è –≤—ã—Å–æ–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–µ –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.

–î–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **Grafana**, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ InfluxDB –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∞–Ω–∞–ª–∏—Ç–∏–∫—É –≤ –≤–∏–¥–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –¥–∞—à–±–æ—Ä–¥–æ–≤. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∫–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏, —Å—Ç—Ä–æ–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏ –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–µ–Ω–¥—ã.

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

1. **traffic_analyzer_camera_{n}**: –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫ –ø–æ –Ω–æ–º–µ—Ä—É n, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ Kafka.
2. **Kafka**: –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö.
3. **Telegraf**: –ø–µ—Ä–µ–Ω–æ—Å –¥–∞–Ω–Ω—ã—Ö –∏–∑ Kafka –≤ InfluxDB.
4. **InfluxDB**: —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö.
5. **Grafana**: –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ InfluxDB –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –¥–∞—à–±–æ—Ä–¥–∞—Ö.
6. **Nginx**: –≤—ã—Å—Ç—É–ø–∞–µ—Ç –≤ —Ä–æ–ª–∏ —Ä–µ–≤–µ—Ä—Å-–ø—Ä–æ–∫—Å–∏ –¥–ª—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–∏—Ö Flask-—Å—Ç—Ä–∏–º–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–≥–æ –≤–∏–¥–µ–æ –Ω–∞ –æ–¥–Ω–æ–º –ø–æ—Ä—Ç—É —Å —Ä–∞–∑–Ω—ã–º–∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º–∏. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–¥–æ–±–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –¥–æ—Å—Ç—É–ø–æ–º –∫ –≤–∏–¥–µ–æ—Å—Ç—Ä–∏–º–∞–º –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –µ–¥–∏–Ω—É—é —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞ –¥–ª—è –≤—Å–µ—Ö –∫–∞–º–µ—Ä.

![–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](content_for_readme/–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞.png)

## üîß –ö–æ–¥ –≥–ª–∞–≤–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –ø–æ –æ–±—Ä–∞–±–æ—Ç–∫–µ –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫–∞

–ö–∞–∂–¥—ã–π –∫–∞–¥—Ä (–æ–±—ä–µ–∫—Ç FrameElement) –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –Ω–æ–¥—ã, –∏ –≤ –∞—Ç—Ä–∏–±—É—Ç—ã —ç—Ç–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤—Å–µ –±–æ–ª—å—à–µ –∏ –±–æ–ª—å—à–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.

```mermaid
graph TD;
    A["VideoReader<br>–°—á–∏—Ç—ã–≤–∞–µ—Ç –∫–∞–¥—Ä—ã –∏–∑ –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫–∞"] --> B["DetectionTrackingNodes<br>–†–µ–∞–ª–∏–∑—É–µ—Ç –¥–µ—Ç–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—à–∏–Ω + —Ç—Ä–µ–∫–∏–Ω–≥"];
    B --> C["TrackerInfoUpdateNode<br>–û–±–Ω–æ–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö —Ç—Ä–µ–∫–∞—Ö"];
    C --> D["CalcStatisticsNode<br>–í—ã—á–∏—Å–ª—è–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å –¥–æ—Ä–æ–≥"];
    D --send_info_kafka==False --> F;
    D --send_info_kafka==True --> E["KafkaProducerNode<br>–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ Kafka"];
    E --> F["ShowNode<br>–†–µ–∞–ª–∏–∑—É–µ—Ç –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤"];
    F --save_video==True --> H["VideoSaverNode<br>–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –∫–∞–¥—Ä—ã"];
    F --show_in_web==True & save_video==False --> L["FlaskServerVideoNode<br>–í—ã–≤–æ–¥–∏—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –∫–∞–¥—Ä—ã –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ"];
    H --show_in_web==True --> L
```

---

## ‚öôÔ∏è –†–∞–±–æ—Ç–∞ —Å –ø—Ä–æ–≥—Ä–∞–º–º–æ–π

–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤ —Ñ–∞–π–ª–µ `configs/app_config.yaml` —É–∫–∞–∑–∞—Ç—å –≤—Å–µ –∂–µ–ª–∞–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã. –î–∞–ª–µ–µ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –∫–æ–¥.

–ß—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º –≤–∏–¥–µ–æ, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å –ø—É—Ç—å –∫ –Ω–µ–º—É –≤ docker compose –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è. –ú–æ–∂–Ω–æ –≤–º–µ—Å—Ç–æ –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª—É —É–∫–∞–∑–∞—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ rtsp –ø–æ—Ç–æ–∫. –¢–∞–º –∂–µ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –ø—É—Ç—å –¥–æ json —Ñ–∞–π–ª–∞ —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ –ø–æ–ª–∏–≥–æ–Ω–æ–≤ –ø—Ä–∏–ª–µ–≥–∞—é—â–∏—Ö –¥–æ—Ä–æ–≥.

### –í–∞—Ä–∏–∞–Ω—Ç—ã –∑–∞–ø—É—Å–∫–∞ –¥–ª—è mp4 —Ñ–∞–π–ª–æ–≤

**main.py** - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π –≤ —Ü–∏–∫–ª–µ –ø—Ä–æ–≥–æ–Ω –∫–∞–¥—Ä–æ–≤ —á–µ—Ä–µ–∑ –≤—Å–µ –Ω–æ–¥—ã.

**main_optimized.py** - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ main.py —Å –ø–æ–º–æ—â—å—é multiprocessing. –ü–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ—Å—Ç–∏—á—å –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ (—Å–≤—ã—à–µ 35 –∫–∞–¥—Ä–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É), –ø–æ—Å–∫–æ–ª—å–∫—É –≤—Å–µ —Ä–µ—Å—É—Ä—Å–æ–µ–º–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –º–µ–∂–¥—É –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏, —Ä–∞–±–æ—Ç–∞—é—â–∏–º–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ.

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –∑–∞–ø—É—Å–∫–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∏–∞–ª—Ç–∞–π–º rtsp –ø–æ—Ç–æ–∫–æ–≤)

**main_stream_optimized.py** ‚Äî –≤–µ—Ä—Å–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ—Ç–æ–∫–æ–≤—ã–º –≤–∏–¥–µ–æ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏, –∫–æ—Ç–æ—Ä–∞—è –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É —Ç–æ–ª—å–∫–æ —Å–∞–º—ã—Ö –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –∫–∞–¥—Ä–æ–≤ –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±—É—Ñ–µ—Ä–∞. –≠—Ç–æ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è –∑–∞ —Å—á–µ—Ç —Ç–æ–≥–æ, —á—Ç–æ –∫–∞–¥—Ä—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ, –∞ –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ—Ü–µ—Å—Å –≤—Å–µ–≥–¥–∞ –±–µ—Ä–µ—Ç –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–æ—Å—Ç—É–ø–Ω—ã–π –∫–∞–¥—Ä.

**main_stream_optimized_v2.py** ‚Äî —É–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è main_stream_optimized.py. –û—Å–Ω–æ–≤–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∏–ª–∏ —Å–±–æ–µ –æ–¥–Ω–æ–≥–æ –∏–∑ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –∏ –≤—Ç–æ—Ä–æ–π –ø—Ä–æ—Ü–µ—Å—Å. –ö–æ–Ω—Ç—Ä–æ–ª—å –∑–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥ `process.is_alive()`, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –ø—Ä–æ—Ü–µ—Å—Å–æ–≤.

---

## üé¨ –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã –∫–æ–¥–∞

### –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã –∞–ª–≥–æ—Ä–∏—Ç–º–∞ c –≤—ã–≤–æ–¥–æ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

–ö–∞–∂–¥–∞—è –º–∞—à–∏–Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ü–≤–µ—Ç–æ–º, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º –¥–æ—Ä–æ–≥–µ, —Å –∫–æ—Ç–æ—Ä–æ–π –æ–Ω–∞ –ø—Ä–∏–±—ã–ª–∞ –∫ –∫—Ä—É–≥–æ–≤–æ–º—É –¥–≤–∏–∂–µ–Ω–∏—é + –≤—ã–≤–æ–¥–∏—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ —á–∏—Å–ª–∞ –≤–∏–¥–∏–º—ã—Ö –º–∞—à–∏–Ω + –∑–Ω–∞—á–µ–Ω–∏—è –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç–∏ –≤—Ö–æ–¥–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ (—á–∏—Å–ª–æ –º–∞—à–∏–Ω –≤ –º–∏–Ω—É—Ç—É —Å –∫–∞–∂–¥–æ–π –≤—Ö–æ–¥—è—â–µ–π –¥–æ—Ä–æ–≥–∏).

–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `show_node.show_info_statistics=True`

![Traffic statistics 1](content_for_readme/with_statistics_1.gif)
![Traffic statistics 2](content_for_readme/with_statistics_2.gif)

–û—Ç–∫–ª—é—á–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–∫–Ω–∞ —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π –º–æ–∂–Ω–æ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `show_node.show_info_statistics=False`

–ß—Ç–æ–±—ã –Ω–∞–±–ª—é–¥–∞—Ç—å fps –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–∞–∫ –≤ –ø–µ—Ä–≤–æ–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤ –∫–æ–Ω—Ñ–∏–≥–µ —É–∫–∞–∑–∞—Ç—å `show_node.draw_fps_info=True`.

---

### –ü—Ä–∏–º–µ—Ä —Ä–µ–∂–∏–º–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç—Ä–µ–∫–∏–Ω–≥–∞ –º–∞—à–∏–Ω

–ö–∞–∂–¥—ã–π id –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å–≤–æ–∏–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–º —Ü–≤–µ—Ç–æ–º.

–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `show_node.show_track_id_different_colors=True`

![Traffic Tracking](content_for_readme/traffic_tracking.gif)

---

## üì¶ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –≤–µ—Ä—Å–∏–∏ –∫–æ–¥–∞

–í –ø—Ä–æ–µ–∫—Ç–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–æ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –≤–µ—Ç–æ–∫, —Ä–µ–∞–ª–∏–∑—É—é—â–∏—Ö —Ä–∞–∑–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–∞—Å—à—Ç–∞–±–Ω–æ–≥–æ Computer Vision –ø—Ä–æ–µ–∫—Ç–∞.

–ù–∞–ø—Ä–∏–º–µ—Ä, –≤ –≤–µ—Ç–∫–µ **main** Docker Compose –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–¥–Ω—è—Ç—å —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã (Grafana –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö PostgreSQL). –û–¥–Ω–∞–∫–æ –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π –±–µ–∫–µ–Ω–¥, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ —Å –ø–æ–º–æ—â—å—é –∏–º–µ—é—â–µ–≥–æ—Å—è –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ Python.

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–µ—Ç–≤–ª–µ–Ω–∏—è Git –ø—Ä–æ–µ–∫—Ç–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ –Ω–∏–∂–µ:

```text
main
‚îî‚îÄ‚îÄ prod_docker_version
    ‚îî‚îÄ‚îÄ multicamera
        ‚îú‚îÄ‚îÄ feature/triton
        ‚îî‚îÄ‚îÄ feature/influx
```

---

## üìÑ License

MIT License - —Å–º. —Ñ–∞–π–ª [LICENSE](LICENSE)

## üë• Contributing

Contributions are welcome! Please feel free to submit a Pull Request.
